import{r as j,j as t,e as k,n as P,l as _,u as A,a as z,b as H,c as V,L as q,o as B,q as O,t as U,i as X,v as Y,w as W,x as Z,g as C}from"./index-DOR72b7R.js";import{E as G}from"./ExploreMore-C2gm3Jiz.js";import{g as $,h as Q,c as J,S as K,f as ee}from"./pagination-B2Ad97kf.js";import{e as te}from"./effect-init-DLnzVo8F.js";import"./Card-DAPkHgtd.js";function se(o,s){const e=$(s);return e!==s&&(e.style.backfaceVisibility="hidden",e.style["-webkit-backface-visibility"]="hidden"),e}function ae(o){let{swiper:s,duration:e,transformElements:m,allSlides:h}=o;const{activeIndex:x}=s,c=r=>r.parentElement?r.parentElement:s.slides.filter(n=>n.shadowRoot&&n.shadowRoot===r.parentNode)[0];if(s.params.virtualTranslate&&e!==0){let r=!1,i;h?i=m:i=m.filter(n=>{const u=n.classList.contains("swiper-slide-transform")?c(n):n;return s.getSlideIndex(u)===x}),i.forEach(n=>{Q(n,()=>{if(r||!s||s.destroyed)return;r=!0,s.animating=!1;const u=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});s.wrapperEl.dispatchEvent(u)})})}}function le(o,s,e){const m=`swiper-slide-shadow${` swiper-slide-shadow-${o}`}`,h=$(s);let x=h.querySelector(`.${m.split(" ").join(".")}`);return x||(x=J("div",m.split(" ")),h.append(x)),x}function ne(o){let{swiper:s,extendParams:e,on:m}=o;e({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),te({effect:"cards",swiper:s,on:m,setTranslate:()=>{const{slides:c,activeIndex:r,rtlTranslate:i}=s,n=s.params.cardsEffect,{startTranslate:u,isTouched:T}=s.touchEventsData,v=i?-s.translate:s.translate;for(let w=0;w<c.length;w+=1){const g=c[w],E=g.progress,l=Math.min(Math.max(E,-4),4);let N=g.swiperSlideOffset;s.params.centeredSlides&&!s.params.cssMode&&(s.wrapperEl.style.transform=`translateX(${s.minTranslate()}px)`),s.params.centeredSlides&&s.params.cssMode&&(N-=c[0].swiperSlideOffset);let f=s.params.cssMode?-N-s.translate:-N,b=0;const M=-100*Math.abs(l);let a=1,d=-n.perSlideRotate*l,S=n.perSlideOffset-Math.abs(l)*.75;const y=s.virtual&&s.params.virtual.enabled?s.virtual.from+w:w,L=(y===r||y===r-1)&&l>0&&l<1&&(T||s.params.cssMode)&&v<u,I=(y===r||y===r+1)&&l<0&&l>-1&&(T||s.params.cssMode)&&v>u;if(L||I){const p=(1-Math.abs((Math.abs(l)-.5)/.5))**.5;d+=-28*l*p,a+=-.5*p,S+=96*p,b=`${-25*p*Math.abs(l)}%`}if(l<0?f=`calc(${f}px ${i?"-":"+"} (${S*Math.abs(l)}%))`:l>0?f=`calc(${f}px ${i?"-":"+"} (-${S*Math.abs(l)}%))`:f=`${f}px`,!s.isHorizontal()){const p=b;b=f,f=p}const R=l<0?`${1+(1-a)*l}`:`${1-(1-a)*l}`,F=`
        translate3d(${f}, ${b}, ${M}px)
        rotateZ(${n.rotate?i?-d:d:0}deg)
        scale(${R})
      `;if(n.slideShadows){let p=g.querySelector(".swiper-slide-shadow");p||(p=le("cards",g)),p&&(p.style.opacity=Math.min(Math.max((Math.abs(l)-.5)/.5,0),1))}g.style.zIndex=-Math.abs(Math.round(E))+c.length;const D=se(n,g);D.style.transform=F}},setTransition:c=>{const r=s.slides.map(i=>$(i));r.forEach(i=>{i.style.transitionDuration=`${c}ms`,i.querySelectorAll(".swiper-slide-shadow").forEach(n=>{n.style.transitionDuration=`${c}ms`})}),ae({swiper:s,duration:c,transformElements:r})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!s.params.cssMode})})}const ie=({card:o,backgroundColor:s})=>{const[e,m]=j.useState(!1),{imageUrl:h,front:x,back:c}=o;return t.jsxs("article",{className:"self-start flex flex-col gap-6 p-4 w-[65vw] sm:w-[35vw] lg:w-[25vw] h-fit rounded-[24px]",style:{backgroundColor:s},children:[t.jsx("div",{className:"relative",children:t.jsx("div",{className:k("h-[150px] lg:h-[200px] w-[100%]",{"skeleton-card-image":!e}),children:t.jsx("img",{className:"h-[100%] w-[100%] object-cover rounded-[16px]",src:h,alt:"card-image",loading:"lazy",onLoad:()=>m(!0)})})}),t.jsxs("div",{className:"flex flex-col gap-8",children:[t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("p",{className:"text-14 font-main text-[#4D2597]",children:"Word"}),t.jsx("h4",{className:"font-secondary text-20 lg:text-28 h-20 sm:h-auto lg:h-20 text-primary font-bold",children:x})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("p",{className:"text-14 font-main text-[#4D2597]",children:"Sentence from the video"}),t.jsx("h5",{className:"font-main text-18 xl:text-20 text-text-secondary",children:c})]})]})]})},fe=({type:o})=>{const{cardId:s}=P(),[e,m]=j.useState(null),{user:h,liked:x}=_(a=>a.user),[c,r]=j.useState([]),i=A(),{addNotification:n}=z(),u=H(),T=V({minWidth:1024}),[v,w]=j.useState(!1),g=v?"0px":"24px",E=()=>{u(-1)},l=j.useMemo(()=>x.find(a=>a.id===(e==null?void 0:e.id)),[x,s]),N=a=>{i(C.addLiked(a))},f=a=>{i(C.removeLiked(a))},b=async()=>{const a={articleId:e==null?void 0:e.id,type:o};if(!h.name){n("You need to log in first","Error");return}if(!l){N(a),O(a).catch(()=>{n("There was an error","Error"),f(e==null?void 0:e.id)});return}f(e==null?void 0:e.id),U(l==null?void 0:l.favoriteId).catch(()=>{n("Favorite did not get removed","Error"),N(a)})},M=()=>{w(!v)};return j.useEffect(()=>{(async()=>{const d=[];X(o,0,7).then(S=>S.data.content.map(y=>d.push(y.title))).catch(()=>n("Related topics could not get fetched","Error")),r(d)})()},[]),j.useEffect(()=>{T&&w(!0)},[e]),j.useEffect(()=>{(async()=>{Y(W(s)).then(d=>Z(o,d.data[0].id)).then(d=>m(d.data)).catch(()=>n("Something went wrong","Error"))})()},[s]),t.jsxs("section",{className:"padding pt-10 lg:pt-20 pb-[100px] flex flex-col gap-8 lg:gap-[53px] min-h-[70vh]",children:[t.jsxs("div",{className:"flex flex-col justify-center lg:justify-normal lg:flex-row gap-2 lg:gap-4",children:[t.jsx("button",{className:"arrow-left bg-no-repeat bg-contain h-4 sm:h-8 w-4 sm:w-8",onClick:E}),t.jsx("h3",{className:"font-secondary text-primary text-32 lg:text-64 font-bold uppercase",children:e==null?void 0:e.title})]}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-14 lg:gap-6",children:[t.jsxs("article",{className:"p-4 lg:p-6 lg:w-[70%] flex flex-col gap-6 lg:gap-10 bg-white rounded-[24px]",children:[t.jsx("div",{className:"w-[100%] h-[55vw] lg:h-[34vw]",children:t.jsx("iframe",{src:e==null?void 0:e.videoUrl,className:"h-[100%] w-[100%] rounded-[16px]",allowFullScreen:!0})}),o==="video"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-[100%] flex items-center justify-end",children:t.jsx("button",{className:"flex justify-center items-center h-10 w-10 bg-additional-light rounded-full",onClick:b,children:t.jsx("div",{className:k("like h-6 w-6 bg-no-repeat bg-contain z-20",{"like-added":l})})})}),t.jsx("p",{className:"font-main text-14 xl:text-16 text-text-secondary",children:e==null?void 0:e.description}),t.jsx("h4",{className:"font-secondary text-28 lg:text-38 font-semibold text-primary",children:"Flashcards:"}),t.jsx("div",{className:"flex justify-center",children:t.jsx(K,{effect:"cards",grabCursor:!0,modules:[ne],className:"mySwiper swiper-cards self-center",cardsEffect:{slideShadows:!1},children:e==null?void 0:e.ankiCards.map((a,d)=>t.jsx(ee,{children:t.jsx(ie,{card:a,backgroundColor:(d+1)%2!==0?"#FEF99F":"#C8ACFD"},d)},d))})}),t.jsxs("a",{className:"mt-10 flex justify-center items-center gap-2 h-16 w-[100%] sm:max-w-[373px] sm:self-start bg-primary rounded-[100px] font-main text-white font-semibold uppercase",href:e==null?void 0:e.href,target:"_blank",children:[t.jsx("p",{className:"font-main text-16 lg:text-20 text-white font-semibold uppercase",children:"View original video"}),t.jsx("div",{className:"chevron-light bg-no-repeat bg-contain h-6 w-6"})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"w-[100%] flex items-center justify-between",children:[t.jsxs("a",{href:e==null?void 0:e.videoUrl,className:"lg:pl-6 flex gap-2 lg:gap-4 items-center justify-center",children:[t.jsx("p",{className:"font-main text-16 lg:text-20 font-semibold text-text-primary uppercase",children:"View original video"}),t.jsx("div",{className:"chevron-dark bg-no-repeat bg-contain h-2 sm:h-3 w-2 sm:w-3"})]}),t.jsx("button",{className:"flex justify-center items-center h-10 w-10 bg-additional-light rounded-full",onClick:b,children:t.jsx("div",{className:k("like h-6 w-6 bg-no-repeat bg-contain z-20",{"like-added":l})})})]}),t.jsxs("div",{className:"flex flex-col gap-4 sm:gap-6 lg:gap-10",children:[t.jsx("h4",{className:"font-secondary text-28 lg:text-38 font-bold text-primary",children:e==null?void 0:e.title}),t.jsx("p",{className:"font-main text-20 lg:text-24 text-text-secondary",dangerouslySetInnerHTML:{__html:e==null?void 0:e.mainSubTitle}})]}),t.jsxs("div",{className:"flex flex-col gap-4 sm:gap-6 lg:gap-10",children:[t.jsx("h5",{className:"font-main text-20 sm:text-28 font-semibold text-primary",children:e==null?void 0:e.secondTitle}),t.jsx("ul",{className:"pl-5 flex flex-col gap-4 lg:gap-6 list-[circle]",children:e==null?void 0:e.underTitleList.map(a=>t.jsx("li",{className:"font-main text-20 lg:text-24 text-text-secondary",children:a},a))})]}),t.jsxs("div",{className:"flex flex-col gap-4 sm:gap-6 lg:gap-10",children:[t.jsx("h5",{className:"font-main text-20 sm:text-28 font-semibold text-primary",children:e==null?void 0:e.thirdTitle}),t.jsx("p",{className:"font-main text-20 lg:text-24 text-text-secondary",dangerouslySetInnerHTML:{__html:e==null?void 0:e.thirdSubTitle}})]}),t.jsxs("div",{className:"flex flex-col gap-4 sm:gap-6 lg:gap-10",children:[t.jsx("h5",{className:"font-main text-20 sm:text-28 font-semibold text-primary",children:e==null?void 0:e.fourthTitle}),t.jsx("p",{className:"font-main text-20 lg:text-24 text-text-secondary",dangerouslySetInnerHTML:{__html:e==null?void 0:e.fourthSubTitle}})]}),t.jsxs("a",{className:"mt-10 flex justify-center items-center gap-2 h-16 w-[100%] sm:max-w-[373px] sm:self-start bg-primary rounded-[100px] font-main text-white font-semibold uppercase",href:e==null?void 0:e.href,target:"_blank",children:[t.jsx("p",{className:"font-main text-16 lg:text-20 text-white font-semibold uppercase",children:"View original article"}),t.jsx("div",{className:"chevron-light bg-no-repeat bg-contain h-6 w-6"})]})]})]}),t.jsxs("article",{className:"relative p-6 flex flex-col gap-6 lg:gap-8 w-[100%] sm:max-w-[500px] lg:w-[30%] h-fit bg-additional rounded-[24px] transition-all duration-300",style:{borderBottomLeftRadius:g,borderBottomRightRadius:g},children:[t.jsx("button",{className:"p-0 w-fit text-left font-secondary text-28 lg:text-38 font-semibold text-primary",onClick:M,children:"Related topics"}),v&&t.jsx("ul",{className:k("topics-shown flex flex-col gap-6 lg:gap-8 bg-additional rounded-b-[24px] w-[100%] z-10 absolute top-[90px] left-0 p-6 pt-0 lg:pt-2"),children:c.map(a=>t.jsx(q,{path:`/${o}/${B(a)}`,children:t.jsx("li",{className:"font-main text-16 lg:text-20 text-text-secondary font-semibold uppercase",children:a})},a))})]})]}),t.jsx(G,{type:o,isNoMargin:!0})]})};export{fe as CardPage,fe as default};
